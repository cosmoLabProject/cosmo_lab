<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="/css/itemList.css" rel="stylesheet">
    <title>관리자페이지</title>
</head>
<body>
    <div class="title">
        <h1>상품목록</h1>
    </div>
    <div class="wrapper">
        <div class="menu-block">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link" href="/admin">관리자 홈</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">상품관리</a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/admin/add-item-form">상품등록</a></li>
                        <li><a class="dropdown-item" href="/admin/items">상품목록</a></li>
                    </ul>
                    </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/delivery">배송관리</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/qna">문의사항</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/members">회원관리</a>
                </li>
            </ul>
        </div>
        <div class="item-list-block">
            <form id="search-form">
            <div class="search-block">
                <div class="category-block">
                    <label for="category" class="form-label">카테고리</label>
                    <select id="category" class="form-select" form="search-form" name="category">
                        <option selected>-</option>
                        <option value="1">skin</option>
                        <option value="2">base</option>
                        <option value="3">lip</option>
                        <option value="4">eye</option>
                        <option value="5">etc</option>
                    </select>
                </div>
                <div class="input-block">
                    <label for="itemName" class="form-label">상품명</label>
                    <input type="text" class="form-control" id="itemName" name="keyword">
                </div>
                <div class="btn-block">
                    <button id="searchBtn" type="button">검색</button>
                </div>
            </div>
            </form>
            <div class="table-block">
                <table class="table align-middle">
                    <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">카테고리</th>
                        <th scope="col">상품명</th>
                        <th scope="col">판매가격</th>
                        <th scope="col">판매상태</th>
                        <th scope="col"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="item : ${items}">
                        <th scope="row" th:text="${itemStat.count}">1</th>
                        <div th:switch="${item.kind}">
                            <td th:case= 1 th:text="skin">카테고리</td>
                            <td th:case= 2 th:text="base">카테고리</td>
                            <td th:case= 3 th:text="lip">카테고리</td>
                            <td th:case= 4 th:text="eye">카테고리</td>
                            <td th:case= 5 th:text="etc">카테고리</td>
                        </div>
                        <td th:text="${item.productName}">상품명</td>
                        <td th:text="${item.price2}">가격</td>
                        <td th:text="${item.available}">Y/N</td>
                        <input type="hidden" th:value="${item.productId}" value="" id="itemId">
                        <td><button type="button" data-bs-toggle="modal" data-bs-target="#modify-item-modal" class="modifyBtn">수정</button></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modify-item-modal" tabindex="-1" data-bs-backdrop="static" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">상품수정</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="/admin/modifyItem" method="post" id="modify-item">
                    <input type="hidden" name="_method" value="PUT">
                    <div class="modal-body">
                        <input type="hidden" id="modalItemId" name="productId">
                        <label for="modalCategory" class="form-label">카테고리</label>
                        <select id="modalCategory" class="form-select" name="kind" form="modify-item">
                            <option selected>-</option>
                            <option value="1">skin</option>
                            <option value="2">base</option>
                            <option value="3">lip</option>
                            <option value="4">eye</option>
                            <option value="5">etc</option>
                        </select>
                    </div>
                    <div class="modal-body">
                        <label for="status" class="form-label">판매상태</label>
                        <select id="status" class="form-select" name="available" form="modify-item">
                            <option selected>-</option>
                            <option value="Y">Y</option>
                            <option value="N">N</option>
                        </select>
                    </div>
                    <div class="modal-body">
                        <label for="modalItemName" class="form-label">상품명</label>
                        <input type="text" class="form-control" id="modalItemName" name="productName">
                    </div>
                    <div class="modal-body">
                        <label for="itemPrice" class="form-label">가격</label>
                        <input type="text" class="form-control" id="itemPrice" name="price2">
                    </div>
                    <div class="modal-body">
                        <label for="itemImage" class="form-label">상품이미지</label>
                        <input class="form-control" type="file" id="itemImage" name="image">
                    </div>
                    <div class="modal-body">
                        <label for="itemDescription" class="form-label">상품설명</label>
                        <textarea id="itemDescription" class="form-control" name="content"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-secondary" id="submitBtn">수정완료</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
<script src="https://code.jquery.com/jquery-latest.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="/js/itemList.js" type="text/javascript"></script>
</body>
</html>